<div class="container">
  <h2>Gestión de Artículos</h2>

  <form (ngSubmit)="agregarArticulo()" #articuloForm="ngForm" class="formulario">
    <mat-form-field appearance="fill" class="full-width">
      <mat-label>Código</mat-label>
      <input matInput name="codigo" [(ngModel)]="nuevoArticulo.codigo" required />
      <mat-error *ngIf="articuloForm.submitted && !nuevoArticulo.codigo">Código es obligatorio</mat-error>
    </mat-form-field>

    <mat-form-field appearance="fill" class="full-width">
      <mat-label>Descripción</mat-label>
      <input matInput name="descripcion" [(ngModel)]="nuevoArticulo.descripcion" required />
      <mat-error *ngIf="articuloForm.submitted && !nuevoArticulo.descripcion">Descripción es obligatoria</mat-error>
    </mat-form-field>

    <mat-form-field appearance="fill" class="full-width">
      <mat-label>Precio</mat-label>
      <input matInput type="number" name="precio" [(ngModel)]="nuevoArticulo.precio" required />
      <mat-error *ngIf="articuloForm.submitted && !nuevoArticulo.precio">Precio es obligatorio</mat-error>
    </mat-form-field>

    <mat-form-field appearance="fill" class="full-width">
      <mat-label>Imagen (URL)</mat-label>
      <input matInput name="imagen" [(ngModel)]="nuevoArticulo.imagen" />
    </mat-form-field>

    <mat-form-field appearance="fill" class="full-width">
      <mat-label>Stock</mat-label>
      <input matInput type="number" name="stock" [(ngModel)]="nuevoArticulo.stock" required />
      <mat-error *ngIf="articuloForm.submitted && !nuevoArticulo.stock">Stock es obligatorio</mat-error>
    </mat-form-field>

    <div class="botones">
      <button mat-raised-button color="primary" type="submit" [disabled]="articuloForm.invalid">Agregar Artículo</button>
      <button mat-button type="button" (click)="nuevoArticulo = { codigo: '', descripcion: '', precio: 0, imagen: '', stock: 0 }">Limpiar</button>
    </div>
  </form>

  <table mat-table [dataSource]="articulos" class="mat-elevation-z8" style="width: 100%; margin-top: 20px;">
    <ng-container matColumnDef="idArticulo">
      <th mat-header-cell *matHeaderCellDef>ID</th>
      <td mat-cell *matCellDef="let articulo">{{articulo.idArticulo}}</td>
    </ng-container>

    <ng-container matColumnDef="codigo">
      <th mat-header-cell *matHeaderCellDef>Código</th>
      <td mat-cell *matCellDef="let articulo">{{articulo.codigo}}</td>
    </ng-container>

    <ng-container matColumnDef="descripcion">
      <th mat-header-cell *matHeaderCellDef>Descripción</th>
      <td mat-cell *matCellDef="let articulo">{{articulo.descripcion}}</td>
    </ng-container>

    <ng-container matColumnDef="precio">
      <th mat-header-cell *matHeaderCellDef>Precio</th>
      <td mat-cell *matCellDef="let articulo">{{articulo.precio | currency}}</td>
    </ng-container>

    <ng-container matColumnDef="stock">
      <th mat-header-cell *matHeaderCellDef>Stock</th>
      <td mat-cell *matCellDef="let articulo">{{articulo.stock}}</td>
    </ng-container>

    <ng-container matColumnDef="imagen">
      <th mat-header-cell *matHeaderCellDef>Imagen</th>
      <td mat-cell *matCellDef="let articulo">
        <img *ngIf="articulo.imagen" [src]="articulo.imagen" alt="Imagen" width="50" height="50" />
      </td>
    </ng-container>

    <tr mat-header-row *matHeaderRowDef="['idArticulo', 'codigo', 'descripcion', 'precio', 'stock', 'imagen']"></tr>
    <tr mat-row *matRowDef="let row; columns: ['idArticulo', 'codigo', 'descripcion', 'precio', 'stock', 'imagen'];"></tr>
  </table>
</div>
